<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Examples for the async package • async</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Examples for the async package">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">async</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9004</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/async-example.html">Examples for the async package</a>
    </li>
    <li>
      <a href="../articles/internals.html">Internals of the async package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/gaborcsardi/async/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Examples for the async package</h1>
                        <h4 data-toc-skip class="author">Gábor
Csárdi</h4>
            
            <h4 data-toc-skip class="date">2025-02-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/gaborcsardi/async/blob/main/vignettes/async-example.Rmd" class="external-link"><code>vignettes/async-example.Rmd</code></a></small>
      <div class="hidden name"><code>async-example.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/gaborcsardi/async#readme" class="external-link">async</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://desc.r-lib.org/" class="external-link">desc</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jeroen.r-universe.dev/jsonlite" class="external-link">jsonlite</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="find-the-fastest-cran-mirror-in-the-us">Find the fastest CRAN mirror in the US<a class="anchor" aria-label="anchor" href="#find-the-fastest-cran-mirror-in-the-us"></a>
</h3>
<p>Get the URLs of all US CRAN mirrors, we’ll use this later.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mirrors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/chooseCRANmirror.html" class="external-link">getCRANmirrors</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">mirror_urls</span> <span class="op">&lt;-</span> <span class="va">mirrors</span><span class="op">$</span><span class="va">URL</span><span class="op">[</span><span class="va">mirrors</span><span class="op">$</span><span class="va">CountryCode</span> <span class="op">==</span> <span class="st">"us"</span><span class="op">]</span></span></code></pre></div>
<p><code>response_time()</code> will be an async function that returns
the total response time of HEAD request to a single URL.</p>
<p><code><a href="../reference/http_stop_for_status.html">http_stop_for_status()</a></code> is similar to
<code><a href="https://httr.r-lib.org/reference/stop_for_status.html" class="external-link">httr::stop_for_status()</a></code>, it throws an error if the status
code is 400 or higher. Should this (or other) error happen, we will just
return <code>Inf</code> for that URL.</p>
<p>We also add the URL to the result, as a name.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">response_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/async.html">async</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">url</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/http_head.html">http_head</a></span><span class="op">(</span><span class="va">url</span><span class="op">)</span><span class="op">$</span></span>
<span>    <span class="fu">then</span><span class="op">(</span><span class="va">http_stop_for_status</span><span class="op">)</span><span class="op">$</span></span>
<span>    <span class="fu">then</span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="va">x</span><span class="op">[[</span><span class="st">"times"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"total"</span><span class="op">]</span><span class="op">]</span>, <span class="va">url</span><span class="op">)</span><span class="op">)</span><span class="op">$</span></span>
<span>    <span class="fu">catch</span><span class="op">(</span>error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="cn">Inf</span>, <span class="va">url</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>Let’s try it, with a real CRAN URL, and a test one that returns an
HTTP 404 status code.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/synchronise.html">synchronise</a></span><span class="op">(</span><span class="fu">response_time</span><span class="op">(</span><span class="va">mirror_urls</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## https://cloud.r-project.org/ </span></span>
<span><span class="co">##                     0.192175</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/synchronise.html">synchronise</a></span><span class="op">(</span><span class="fu">response_time</span><span class="op">(</span><span class="st">"https://httpbin.org/status/404"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## https://httpbin.org/status/404 </span></span>
<span><span class="co">##                            Inf</span></span></code></pre>
<p><code>fastest_urls()</code> will run <code>response_time()</code> on
all supplied URLs, and stop as soon as 10 of them respond. Then we sort
the results, so the fastest response is first.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fastest_urls</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/async.html">async</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">urls</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">reqs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">urls</span>, <span class="va">response_time</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="../reference/when_some.html">when_some</a></span><span class="op">(</span><span class="fl">10</span>, .list <span class="op">=</span> <span class="va">reqs</span><span class="op">)</span><span class="op">$</span></span>
<span>    <span class="fu">then</span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>Let’s run it on the real data.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/synchronise.html">synchronise</a></span><span class="op">(</span><span class="fu">fastest_urls</span><span class="op">(</span><span class="va">mirror_urls</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##             https://cloud.r-project.org/ </span></span>
<span><span class="co">##                                 0.031591 </span></span>
<span><span class="co">##         https://lib.stat.cmu.edu/R/CRAN/ </span></span>
<span><span class="co">##                                 0.282385 </span></span>
<span><span class="co">##     https://mirror.las.iastate.edu/CRAN/ </span></span>
<span><span class="co">##                                 0.312472 </span></span>
<span><span class="co">##           https://mirrors.cicku.me/cran/ </span></span>
<span><span class="co">##                                 0.314865 </span></span>
<span><span class="co">##   https://mirror.chpc.utah.edu/pub/cran/ </span></span>
<span><span class="co">##                                 0.323412 </span></span>
<span><span class="co">##         https://ftp.osuosl.org/pub/cran/ </span></span>
<span><span class="co">##                                 0.332311 </span></span>
<span><span class="co">## https://repo.miserver.it.umich.edu/cran/ </span></span>
<span><span class="co">##                                 0.341426 </span></span>
<span><span class="co">##         https://cran.mirrors.hoobly.com/ </span></span>
<span><span class="co">##                                 0.351561 </span></span>
<span><span class="co">##                  https://cran.wustl.edu/ </span></span>
<span><span class="co">##                                 0.510287 </span></span>
<span><span class="co">##       https://mirrors.nics.utk.edu/cran/ </span></span>
<span><span class="co">##                                 0.556724</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="resolve-packages-from-github-and-urls">Resolve packages from GitHub and URLs<a class="anchor" aria-label="anchor" href="#resolve-packages-from-github-and-urls"></a>
</h3>
<p>By <em>resolving</em> we mean 1. getting the <code>DESCRIPTION</code>
file of the package to be able to look up dependencies, and other
metadata, and 2. getting a download link, in case we want to download
the package later.</p>
<p>For this example we’ll implement two package types: 1. package on
GitHub, and 2. package file at a URL.</p>
<p>We start with GitHub packages, these are more complicated. First, we
need to set the <code>Accept</code> HTTP header when we talk to the
GitHub API, so define a helper function for that. We also set a GitHub
token to avoid GitHub rate limits, this should be in the
<code>GITHUB_PAT</code> environment variable.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">default_gh_headers</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">headers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Accept"</span> <span class="op">=</span> <span class="st">"application/vnd.github.v3+json"</span><span class="op">)</span></span>
<span>  <span class="va">pat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"GITHUB_PAT"</span>, <span class="st">""</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">pat</span> <span class="op">!=</span> <span class="st">""</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">headers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">headers</span>, Authorization <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"token"</span>, <span class="va">pat</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">headers</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Getting the <code>DESCRIPTION</code> file is easy, we just need to
hit the right API endpoint, and then extract the response.
<code><a href="https://desc.r-lib.org/reference/desc.html" class="external-link">desc::desc()</a></code> creates a nice <code><a href="https://desc.r-lib.org/reference/description.html" class="external-link">desc::description</a></code>
object that can be queried.</p>
<p>We use <code><a href="../reference/http_stop_for_status.html">http_stop_for_status()</a></code> to error out, if the any
error happens, e.g. the repo or the file does not exist, and we cannot
access it, etc. We don’t catch this (or other) error here, so
<code>get_gh_description()</code> will throw an error to its
<code>$then()</code> (or <code>$when_any()</code> or
<code>$when_all()</code>) child, or to <code><a href="../reference/synchronise.html">synchronise()</a></code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">get_gh_description</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/async.html">async</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">user</span>, <span class="va">repo</span><span class="op">)</span>  <span class="op">{</span></span>
<span>  <span class="va">desc_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"https://raw.githubusercontent.com/"</span>, <span class="va">user</span>, <span class="st">"/"</span>, <span class="va">repo</span>,</span>
<span>    <span class="st">"/HEAD/DESCRIPTION"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="../reference/http_get.html">http_get</a></span><span class="op">(</span><span class="va">desc_url</span>, headers <span class="op">=</span> <span class="fu">default_gh_headers</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">$</span></span>
<span>    <span class="fu">then</span><span class="op">(</span><span class="va">http_stop_for_status</span><span class="op">)</span><span class="op">$</span></span>
<span>    <span class="fu">then</span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">resp</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/rawConversion.html" class="external-link">rawToChar</a></span><span class="op">(</span><span class="va">resp</span><span class="op">$</span><span class="va">content</span><span class="op">)</span><span class="op">)</span><span class="op">$</span></span>
<span>    <span class="fu">then</span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">txt</span><span class="op">)</span> <span class="fu">desc</span><span class="fu">::</span><span class="fu"><a href="https://desc.r-lib.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">txt</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>Test:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/synchronise.html">synchronise</a></span><span class="op">(</span><span class="fu">get_gh_description</span><span class="op">(</span><span class="st">"jeroen"</span>, <span class="st">"curl"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #0000BB;">Type</span>: Package</span></span>
<span><span class="co">## <span style="color: #0000BB;">Package</span>: curl</span></span>
<span><span class="co">## <span style="color: #0000BB;">Title</span>: A Modern and Flexible Web Client for R</span></span>
<span><span class="co">## <span style="color: #0000BB;">Version</span>: 6.2.1.9000</span></span>
<span><span class="co">## <span style="color: #0000BB;">Authors@R</span> (parsed):</span></span>
<span><span class="co">##     * Jeroen Ooms &lt;jeroenooms@gmail.com&gt; [aut, cre] (&lt;https://orcid.org/0000-0002-4035-0289&gt;)</span></span>
<span><span class="co">##     * Hadley Wickham [ctb]</span></span>
<span><span class="co">##     * Posit Software, PBC [cph]</span></span>
<span><span class="co">## <span style="color: #0000BB;">Description</span>: Bindings to 'libcurl' &lt;https://curl.se/libcurl/&gt; for</span></span>
<span><span class="co">##     performing fully configurable HTTP/FTP requests where responses can be</span></span>
<span><span class="co">##     processed in memory, on disk, or streaming via the callback or</span></span>
<span><span class="co">##     connection interfaces. Some knowledge of 'libcurl' is recommended; for</span></span>
<span><span class="co">##     a more-user-friendly web client see the 'httr2' package which builds</span></span>
<span><span class="co">##     on this package with http specific tools and logic.</span></span>
<span><span class="co">## <span style="color: #0000BB;">License</span>: MIT + file LICENSE</span></span>
<span><span class="co">## <span style="color: #0000BB;">URL</span>: https://jeroen.r-universe.dev/curl</span></span>
<span><span class="co">## <span style="color: #0000BB;">BugReports</span>: https://github.com/jeroen/curl/issues</span></span>
<span><span class="co">## <span style="color: #0000BB;">Depends</span>:</span></span>
<span><span class="co">##     R (&gt;= 3.0.0)</span></span>
<span><span class="co">## <span style="color: #0000BB;">Suggests</span>:</span></span>
<span><span class="co">##     httpuv (&gt;= 1.4.4),</span></span>
<span><span class="co">##     jsonlite,</span></span>
<span><span class="co">##     knitr,</span></span>
<span><span class="co">##     later,</span></span>
<span><span class="co">##     rmarkdown,</span></span>
<span><span class="co">##     spelling,</span></span>
<span><span class="co">##     testthat (&gt;= 1.0.0),</span></span>
<span><span class="co">##     webutils</span></span>
<span><span class="co">## <span style="color: #0000BB;">VignetteBuilder</span>:</span></span>
<span><span class="co">##     knitr</span></span>
<span><span class="co">## <span style="color: #0000BB;">Encoding</span>: UTF-8</span></span>
<span><span class="co">## <span style="color: #0000BB;">Language</span>: en-US</span></span>
<span><span class="co">## <span style="color: #0000BB;">Roxygen</span>: list(markdown = TRUE)</span></span>
<span><span class="co">## <span style="color: #0000BB;">RoxygenNote</span>: 7.3.2.9000</span></span>
<span><span class="co">## <span style="color: #0000BB;">SystemRequirements</span>: libcurl (&gt;= 7.62): libcurl-devel (rpm) or</span></span>
<span><span class="co">##     libcurl4-openssl-dev (deb)</span></span></code></pre>
<p>Test non-existing repos, and other errors:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/synchronise.html">synchronise</a></span><span class="op">(</span><span class="fu">get_gh_description</span><span class="op">(</span><span class="st">"jeroen"</span>, <span class="st">"curlqwerty"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in stop(http_error(resp)): Not Found (HTTP 404).</span></span></code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/synchronise.html">synchronise</a></span><span class="op">(</span><span class="fu">get_gh_description</span><span class="op">(</span><span class="st">"git"</span>, <span class="st">"git"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in stop(http_error(resp)): Not Found (HTTP 404).</span></span></code></pre>
<p>The next thing we need is the SHA of the commit we want to download.
For simplicity we always use the last commit of default branch here.
This function is very similar to the previous one otherwise.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">get_gh_sha</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/async.html">async</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">user</span>, <span class="va">repo</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">commit_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"https://api.github.com/repos/"</span>, <span class="va">user</span>, <span class="st">"/"</span>, <span class="va">repo</span>, <span class="st">"/git/trees/HEAD"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="../reference/http_get.html">http_get</a></span><span class="op">(</span><span class="va">commit_url</span>, headers <span class="op">=</span> <span class="fu">default_gh_headers</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">$</span></span>
<span>    <span class="fu">then</span><span class="op">(</span><span class="va">http_stop_for_status</span><span class="op">)</span><span class="op">$</span></span>
<span>    <span class="fu">then</span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">resp</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">cdata</span> <span class="op">&lt;-</span> <span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://jeroen.r-universe.dev/jsonlite/reference/fromJSON.html" class="external-link">fromJSON</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rawConversion.html" class="external-link">rawToChar</a></span><span class="op">(</span><span class="va">resp</span><span class="op">$</span><span class="va">content</span><span class="op">)</span>,</span>
<span>                                  simplifyVector <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>      <span class="va">cdata</span><span class="op">$</span><span class="va">sha</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>Test:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/synchronise.html">synchronise</a></span><span class="op">(</span><span class="fu">get_gh_sha</span><span class="op">(</span><span class="st">"jeroen"</span>, <span class="st">"curl"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "153ba67d2956432e4efe216de2e5008afdc42d7b"</span></span></code></pre>
<p>A small helper function to get a GitHub download URL from the user
name, repo name and the sha hash:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">get_gh_download_url</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">user</span>, <span class="va">repo</span>, <span class="va">sha</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"https://api.github.com/repos/"</span>, <span class="va">user</span>, <span class="st">"/"</span>, <span class="va">repo</span>,</span>
<span>         <span class="st">"/zipball/"</span>, <span class="va">sha</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>We are ready to write the GitHub resolver now. It will take a slug,
i.e. the <code>user/repo</code> form, and then query both the
<code>DESCRIPTION</code> file and the SHA hash. <code><a href="../reference/when_all.html">when_all()</a></code>
resolves if both of them are done, and results a named list of both
pieces of data. Then we just create the download URL, and simply return
it with the already parsed <code>DESCRIPTION</code>.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resolve_gh</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/async.html">async</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">slug</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">slug</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="va">slug</span>, <span class="st">"/"</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="va">user</span> <span class="op">&lt;-</span> <span class="va">slug</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="va">repo</span> <span class="op">&lt;-</span> <span class="va">slug</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="va">desc</span> <span class="op">&lt;-</span> <span class="fu">get_gh_description</span><span class="op">(</span><span class="va">user</span>, <span class="va">repo</span><span class="op">)</span></span>
<span>  <span class="va">sha</span>  <span class="op">&lt;-</span> <span class="fu">get_gh_sha</span><span class="op">(</span><span class="va">user</span>, <span class="va">repo</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="../reference/when_all.html">when_all</a></span><span class="op">(</span>desc <span class="op">=</span> <span class="va">desc</span>, sha <span class="op">=</span> <span class="va">sha</span><span class="op">)</span><span class="op">$</span></span>
<span>    <span class="fu">then</span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        url <span class="op">=</span> <span class="fu">get_gh_download_url</span><span class="op">(</span><span class="va">user</span>, <span class="va">repo</span>, <span class="va">x</span><span class="op">$</span><span class="va">sha</span><span class="op">)</span>,</span>
<span>        description <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">desc</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>Test:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/synchronise.html">synchronise</a></span><span class="op">(</span><span class="fu">resolve_gh</span><span class="op">(</span><span class="st">"jeroen/curl"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $url</span></span>
<span><span class="co">## [1] "https://api.github.com/repos/jeroen/curl/zipball/153ba67d2956432e4efe216de2e5008afdc42d7b"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $description</span></span>
<span><span class="co">## <span style="color: #0000BB;">Type</span>: Package</span></span>
<span><span class="co">## <span style="color: #0000BB;">Package</span>: curl</span></span>
<span><span class="co">## <span style="color: #0000BB;">Title</span>: A Modern and Flexible Web Client for R</span></span>
<span><span class="co">## <span style="color: #0000BB;">Version</span>: 6.2.1.9000</span></span>
<span><span class="co">## <span style="color: #0000BB;">Authors@R</span> (parsed):</span></span>
<span><span class="co">##     * Jeroen Ooms &lt;jeroenooms@gmail.com&gt; [aut, cre] (&lt;https://orcid.org/0000-0002-4035-0289&gt;)</span></span>
<span><span class="co">##     * Hadley Wickham [ctb]</span></span>
<span><span class="co">##     * Posit Software, PBC [cph]</span></span>
<span><span class="co">## <span style="color: #0000BB;">Description</span>: Bindings to 'libcurl' &lt;https://curl.se/libcurl/&gt; for</span></span>
<span><span class="co">##     performing fully configurable HTTP/FTP requests where responses can be</span></span>
<span><span class="co">##     processed in memory, on disk, or streaming via the callback or</span></span>
<span><span class="co">##     connection interfaces. Some knowledge of 'libcurl' is recommended; for</span></span>
<span><span class="co">##     a more-user-friendly web client see the 'httr2' package which builds</span></span>
<span><span class="co">##     on this package with http specific tools and logic.</span></span>
<span><span class="co">## <span style="color: #0000BB;">License</span>: MIT + file LICENSE</span></span>
<span><span class="co">## <span style="color: #0000BB;">URL</span>: https://jeroen.r-universe.dev/curl</span></span>
<span><span class="co">## <span style="color: #0000BB;">BugReports</span>: https://github.com/jeroen/curl/issues</span></span>
<span><span class="co">## <span style="color: #0000BB;">Depends</span>:</span></span>
<span><span class="co">##     R (&gt;= 3.0.0)</span></span>
<span><span class="co">## <span style="color: #0000BB;">Suggests</span>:</span></span>
<span><span class="co">##     httpuv (&gt;= 1.4.4),</span></span>
<span><span class="co">##     jsonlite,</span></span>
<span><span class="co">##     knitr,</span></span>
<span><span class="co">##     later,</span></span>
<span><span class="co">##     rmarkdown,</span></span>
<span><span class="co">##     spelling,</span></span>
<span><span class="co">##     testthat (&gt;= 1.0.0),</span></span>
<span><span class="co">##     webutils</span></span>
<span><span class="co">## <span style="color: #0000BB;">VignetteBuilder</span>:</span></span>
<span><span class="co">##     knitr</span></span>
<span><span class="co">## <span style="color: #0000BB;">Encoding</span>: UTF-8</span></span>
<span><span class="co">## <span style="color: #0000BB;">Language</span>: en-US</span></span>
<span><span class="co">## <span style="color: #0000BB;">Roxygen</span>: list(markdown = TRUE)</span></span>
<span><span class="co">## <span style="color: #0000BB;">RoxygenNote</span>: 7.3.2.9000</span></span>
<span><span class="co">## <span style="color: #0000BB;">SystemRequirements</span>: libcurl (&gt;= 7.62): libcurl-devel (rpm) or</span></span>
<span><span class="co">##     libcurl4-openssl-dev (deb)</span></span></code></pre>
<p>Resolving a package at an HTTP URL is much simpler, it needs a single
HTTP request, because we simply need to download the package to get the
DESCRIPTION file. We place the downloaded package in a temporary file
(with the same file name), and return a <code>file://</code> URL to this
file.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resolve_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/async.html">async</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">url</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">tmpdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">dest</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmpdir</span>,  <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">url</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="../reference/http_get.html">http_get</a></span><span class="op">(</span><span class="va">url</span>, file <span class="op">=</span> <span class="va">dest</span><span class="op">)</span><span class="op">$</span></span>
<span>    <span class="fu">then</span><span class="op">(</span><span class="va">http_stop_for_status</span><span class="op">)</span><span class="op">$</span></span>
<span>    <span class="fu">then</span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">dest</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html" class="external-link">normalizePath</a></span><span class="op">(</span><span class="va">dest</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        url <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"file://"</span>, <span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html" class="external-link">normalizePath</a></span><span class="op">(</span><span class="va">dest</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        description <span class="op">=</span> <span class="fu">desc</span><span class="fu">::</span><span class="fu"><a href="https://desc.r-lib.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">dest</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>Test:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">curl20_url</span> <span class="op">&lt;-</span> <span class="st">"https://cloud.r-project.org/src/contrib/Archive/curl/curl_2.0.tar.gz"</span></span>
<span><span class="fu"><a href="../reference/synchronise.html">synchronise</a></span><span class="op">(</span><span class="fu">resolve_url</span><span class="op">(</span><span class="va">curl20_url</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $url</span></span>
<span><span class="co">## [1] "file:// /tmp/RtmpoppcGy/file23291191908d/curl_2.0.tar.gz"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $description</span></span>
<span><span class="co">## <span style="color: #0000BB;">Type</span>: Package</span></span>
<span><span class="co">## <span style="color: #0000BB;">Package</span>: curl</span></span>
<span><span class="co">## <span style="color: #0000BB;">Title</span>: A Modern and Flexible Web Client for R</span></span>
<span><span class="co">## <span style="color: #0000BB;">Version</span>: 2.0</span></span>
<span><span class="co">## <span style="color: #0000BB;">Authors@R</span> (parsed):</span></span>
<span><span class="co">##     * Jeroen Ooms &lt;jeroen.ooms@stat.ucla.edu&gt; [cre, aut]</span></span>
<span><span class="co">##     * Hadley Wickham &lt;hadley@rstudio.com&gt; [ctb]</span></span>
<span><span class="co">##     * RStudio [cph]</span></span>
<span><span class="co">## <span style="color: #0000BB;">Author</span>: Jeroen Ooms [cre, aut], Hadley Wickham [ctb], RStudio</span></span>
<span><span class="co">##     [cph]</span></span>
<span><span class="co">## <span style="color: #0000BB;">Maintainer</span>: Jeroen Ooms &lt;jeroen.ooms@stat.ucla.edu&gt;</span></span>
<span><span class="co">## <span style="color: #0000BB;">Description</span>: The curl() and curl_download() functions provide</span></span>
<span><span class="co">##     highly configurable drop-in replacements for base url() and</span></span>
<span><span class="co">##     download.file() with better performance, support for encryption</span></span>
<span><span class="co">##     (https, ftps), gzip compression, authentication, and other libcurl</span></span>
<span><span class="co">##     goodies. The core of the package implements a framework for performing</span></span>
<span><span class="co">##     fully customized requests where data can be processed either in</span></span>
<span><span class="co">##     memory, on disk, or streaming via the callback or connection</span></span>
<span><span class="co">##     interfaces. Some knowledge of libcurl is recommended; for a</span></span>
<span><span class="co">##     more-user-friendly web client see the 'httr' package which builds on</span></span>
<span><span class="co">##     this package with http specific tools and logic.</span></span>
<span><span class="co">## <span style="color: #0000BB;">License</span>: MIT + file LICENSE</span></span>
<span><span class="co">## <span style="color: #0000BB;">URL</span>: https://github.com/jeroenooms/curl#readme</span></span>
<span><span class="co">## <span style="color: #0000BB;">BugReports</span>: https://github.com/jeroenooms/curl/issues</span></span>
<span><span class="co">## <span style="color: #0000BB;">Depends</span>:</span></span>
<span><span class="co">##     R (&gt;= 3.0.0)</span></span>
<span><span class="co">## <span style="color: #0000BB;">Suggests</span>:</span></span>
<span><span class="co">##     jsonlite,</span></span>
<span><span class="co">##     knitr,</span></span>
<span><span class="co">##     magrittr,</span></span>
<span><span class="co">##     rmarkdown,</span></span>
<span><span class="co">##     testthat (&gt;= 1.0.0)</span></span>
<span><span class="co">## <span style="color: #0000BB;">VignetteBuilder</span>:</span></span>
<span><span class="co">##     knitr</span></span>
<span><span class="co">## <span style="color: #0000BB;">Date/Publication</span>: 2016-09-17 00:42:17</span></span>
<span><span class="co">## <span style="color: #0000BB;">LazyData</span>: true</span></span>
<span><span class="co">## <span style="color: #0000BB;">NeedsCompilation</span>: yes</span></span>
<span><span class="co">## <span style="color: #0000BB;">Packaged</span>: 2016-09-16 15:48:22 UTC; jeroen</span></span>
<span><span class="co">## <span style="color: #0000BB;">Repository</span>: CRAN</span></span>
<span><span class="co">## <span style="color: #0000BB;">RoxygenNote</span>: 5.0.1</span></span>
<span><span class="co">## <span style="color: #0000BB;">SystemRequirements</span>: libcurl: libcurl-devel (rpm) or</span></span>
<span><span class="co">##     libcurl4-openssl-dev (deb).</span></span></code></pre>
<p>Now combine the two functions:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synchronise.html">synchronise</a></span><span class="op">(</span><span class="fu"><a href="../reference/when_all.html">when_all</a></span><span class="op">(</span></span>
<span>  <span class="fu">resolve_gh</span><span class="op">(</span><span class="st">"jeroen/curl"</span><span class="op">)</span>,</span>
<span>  <span class="fu">resolve_gh</span><span class="op">(</span><span class="st">"ropensci/magick"</span><span class="op">)</span>,</span>
<span>  <span class="fu">resolve_url</span><span class="op">(</span><span class="va">curl20_url</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 3</span></span></code></pre>
<p>Errors bubble up to the top level, other downloads are cancelled
automatically (unless they are already completed of course), and an
error is thrown from <code><a href="../reference/synchronise.html">synchronise()</a></code>.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span>
<span>  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synchronise.html">synchronise</a></span><span class="op">(</span><span class="fu"><a href="../reference/when_all.html">when_all</a></span><span class="op">(</span></span>
<span>    <span class="fu">resolve_gh</span><span class="op">(</span><span class="st">"jeroen/curl"</span><span class="op">)</span>,</span>
<span>    <span class="fu">resolve_gh</span><span class="op">(</span><span class="st">"ropensci/magick"</span><span class="op">)</span>,</span>
<span>    <span class="fu">resolve_url</span><span class="op">(</span><span class="va">curl20_url</span><span class="op">)</span>,</span>
<span>    <span class="fu">resolve_url</span><span class="op">(</span><span class="st">"https://httpbin.org/delay/2"</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span>,</span>
<span>  error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="va">e</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;async error: Line starting '{ ...' is malformed!</span></span>
<span><span class="co">##  in *parent* callback of `http_get(url, file = dest)$then(http_stop_for_status)$then` at ?/?:?:?&gt;</span></span></code></pre>
<p>But we can also handle errors locally, at any point we wish. E.g. we
can simply return <code>NULL</code> values for the failed packages.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synchronise.html">synchronise</a></span><span class="op">(</span><span class="fu"><a href="../reference/when_all.html">when_all</a></span><span class="op">(</span></span>
<span>  <span class="fu">resolve_gh</span><span class="op">(</span><span class="st">"jeroen/curl"</span><span class="op">)</span>,</span>
<span>  <span class="fu">resolve_gh</span><span class="op">(</span><span class="st">"ropensci/magickfoooooobar"</span><span class="op">)</span><span class="op">$</span><span class="fu">catch</span><span class="op">(</span>error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>  <span class="fu">resolve_url</span><span class="op">(</span><span class="va">curl20_url</span><span class="op">)</span>,</span>
<span>  <span class="fu">resolve_url</span><span class="op">(</span><span class="st">"https://httpbin.org/status/401"</span><span class="op">)</span><span class="op">$</span><span class="fu">catch</span><span class="op">(</span>error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">res</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">description</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"Package"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Package </span></span>
<span><span class="co">##  "curl"</span></span></code></pre>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## NULL</span></span></code></pre>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">description</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"Version"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Version </span></span>
<span><span class="co">##   "2.0"</span></span></code></pre>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## NULL</span></span></code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Gábor Csárdi.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
